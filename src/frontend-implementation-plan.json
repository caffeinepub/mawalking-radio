{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Update global background to Nairobi skyline and ensure SW cache refresh",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace the global background by updating the existing background image assets (same filenames/dimensions) to Nairobi skyline variants and ensure the current CSS background/overlay behavior remains intact.",
      "acceptanceCriteria": [
        "The following files exist in `frontend/public/assets/generated/` and visually depict the skyline/urban landscape of Nairobi, Kenya: `mawalking-user-bg-mobile.dim_1080x1920.(png|webp|avif)` and `mawalking-user-bg.dim_1920x1080.(png|webp|avif)`.",
        "On reload, the app background displays the new Nairobi skyline image on mobile (<768px) and desktop (>=768px) using the existing CSS references in `frontend/src/index.css`.",
        "The existing background overlay readability treatment (the `body::before` dark overlay) remains intact and the UI remains readable over the new background."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg-mobile.dim_1080x1920.png",
          "operation": "modify",
          "description": "Replace/overwrite the existing mobile portrait background PNG with a Nairobi, Kenya skyline/urban landscape image at 1080x1920, keeping the exact existing filename and dimensions."
        },
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg-mobile.dim_1080x1920.webp",
          "operation": "create",
          "description": "Add the mobile portrait Nairobi skyline background in WebP format at 1080x1920 using the exact filename referenced by the app."
        },
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg-mobile.dim_1080x1920.avif",
          "operation": "create",
          "description": "Add the mobile portrait Nairobi skyline background in AVIF format at 1080x1920 using the exact filename referenced by the app."
        },
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg.dim_1920x1080.png",
          "operation": "modify",
          "description": "Replace/overwrite the existing desktop landscape background PNG with a Nairobi, Kenya skyline/urban landscape image at 1920x1080, keeping the exact existing filename and dimensions."
        },
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg.dim_1920x1080.webp",
          "operation": "create",
          "description": "Add the desktop landscape Nairobi skyline background in WebP format at 1920x1080 using the exact filename referenced by the app."
        },
        {
          "path": "frontend/public/assets/generated/mawalking-user-bg.dim_1920x1080.avif",
          "operation": "create",
          "description": "Add the desktop landscape Nairobi skyline background in AVIF format at 1920x1080 using the exact filename referenced by the app."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update the service worker caching/versioning so updated Nairobi background assets are fetched and displayed on the next reload without requiring manual cache clearing.",
      "acceptanceCriteria": [
        "After deploying the new background assets, a user who reloads the app receives the updated background without needing to use Settings â†’ Refresh Background or manually clear browser caches.",
        "If the service worker continues to serve an older cached background, update the cache versioning or cache invalidation logic so the new assets are fetched and displayed on next reload."
      ],
      "file_operations": [
        {
          "path": "frontend/public/service-worker.js",
          "operation": "modify",
          "description": "Bump the service worker cache version and adjust background pre-cache fetch behavior to avoid reusing stale cached responses for BACKGROUND_ASSETS, ensuring the updated `frontend/public/assets/generated/mawalking-user-bg-mobile.dim_1080x1920.(png|webp|avif)` and `frontend/public/assets/generated/mawalking-user-bg.dim_1920x1080.(png|webp|avif)` are retrieved after deployment on the next reload."
        }
      ]
    }
  ]
}